 const listPhones =
[{
    
    "img": "https://phihungmobile.com/wp-content/uploads/2019/09/iPhone-11-Pro-Max-Midnight-Phi-Hung-mobile-150x150.png",
    "name": "IPHONE 11",
    "price": "21000000 ",
    "incart":"0"
  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/1992615027.jpeg",
    "name": "IPHONE 12 MINI",
    "price": "21000000 ",
    "incart":"0"

  }, {
    "img": "https://www.truesmart.com.vn/img/p/iphone-x-lock-64gb-chinh-hang-97-99-4819.png",
    "name": "IPHONE X",
    "price": "10000000 ",
    "incart":"0"

  }, {
    "img": "https://duongphi.com/wp-content/uploads/2020/08/8-do-01-150x150.png",
    "name": "IPHONE 8",
    "price": "8000000 ",
    "incart":"0"

  }, {
    "img": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSruVfejSMMRcakjVVSpmyLNm2mNDBusJR4uQ&usqp=CAU",
    "name": "IPHONE 7",
    "price": "6000000 ",
    "incart":"0"

  }, {
    "img": "data:image/jpeg;base64,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",
    "name": "XIAOMI 9",
    "price": "4000000 ",
    "incart":"0"

  }, {
    "img": "https://duongphi.com/wp-content/uploads/2020/10/3-001-4-150x150.png",
    "name": "IPHONE 12",
    "price": "30000000",
    "incart":"0"

  }, {
    "img": "https://i.blackfriday.com/imagery/offers/262159.1605901883.fit_lpad.size_150x150.jpg",
    "name": "NOTE",
    "price": "10000000 ",
    "incart":"0"

  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/970883616.jpeg",
    "name": "OPPO F11 PRO",
    "price": "7000000 ",
    "incart":"0"

  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/858765883.jpeg",
    "name": "OPPO A92",
    "price": "6000000 ",
    "incart":"0"

  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/1251874821.jpeg",
    "name": "OPPO A31",
    "price": "4000000 ",
    "incart":"0"

  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/70122693.jpeg",
    "name": "NOKIA 6",
    "price": "100000 ",
    "incart":"0"

  }, {
    "img": "https://cdn1.viettelstore.vn/images/Product/ProductImage/small/1326615767.jpeg",
    "name": "NOKIA 5310 DS",
    "price": "200000 ",
    "incart":"0"

  }, {
    "img": "https://duongphi.com/wp-content/uploads/2020/08/duongphi.com-vinh-long-iphone-11-pro-max-64gb-vang-01-3-150x150.png",
    "name": "IPHONE 11 PROMAX",
    "price": "15000000 ",
    "incart":"0"

  }, {
    "img": "https://131mobile.vn/uploads/shop/1608350705_grey.jpg",
    "name": "IPHONE 11 PRO",
    "price": "12000000",
    "incart":"0"

  }]

  function displayListPhones(){
      let productContainer = document.getElementById('product-container');
      productContainer.innerHTML = ""
      for(let i = 0; i < listPhones.length; i++){
        const phone = listPhones[i];
        function formatNumber (num) {
          return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
      }
      
        let HTML =`
        <div  class="product-show">
        <img src="${phone.img}" alt="">
            <div id='name'>${phone.name}</div>
            <div>${formatNumber(phone.price)} VND</div>
            <button class="btnAddCart" onclick="clickCart('${phone.name}')">Add To Cart</button>
            </div>

        
        `
        productContainer.innerHTML+= HTML
        
      }
  }
  displayListPhones()

  let number = document.getElementById("cart-number").textContent
  console.log(number);

   function clickCart(phoneName){
    
    for(let i=0;i<listPhones.length;i++){
      let myPhone = listPhones[i]
    if(phoneName == myPhone.name){
      cartNumbers();
      setItems(myPhone);
      totalCost(myPhone);
      alertify.success('ADDED SUCCESSFULLY'); 

      // addBtn(myPhone)

      
    } 
    
   };
   
   
  }
  //Khi chạy lại trang thì sẽ hiện ra số sản phẩm đã có lưu trong local storage
  function onLoadCartNumbers(){
    let productNumbers = localStorage.getItem('cartNumbers');

    if(productNumbers){
      document.getElementById('cart-number').textContent = productNumbers;

    }

  }
  //Khi click mua nếu chưa có spham thì set item với value = 1 và số ở giỏ hàng = 1
  //Còn nếu có spham rồi thì mỗi cái đó sẽ tăng 1, và nhớ để value bằng số thì mới cộng được
  function cartNumbers(){
    let productNumbers = localStorage.getItem('cartNumbers');
    // console.log(productNumbers);

    productNumbers = parseInt(productNumbers);
    if(productNumbers){
      localStorage.setItem('cartNumbers',productNumbers+1);
      document.getElementById('cart-number').textContent = productNumbers+1;

    }
    else {
      localStorage.setItem('cartNumbers',1);
      document.getElementById('cart-number').textContent = 1
    }
    // setItems(product)
    
  }  

  onLoadCartNumbers()

  function setItems(product){
    
    let cartItems = localStorage.getItem('productsInCart');
    cartItems = JSON.parse(cartItems)
    if(cartItems != null) {
      if(cartItems[product.name] == undefined){
        cartItems = {
          ...cartItems,
          [product.name]:product
        }
      }
      // console.log(typeof cartItems[product.name].incart );
      cartItems[product.name].incart = parseInt(cartItems[product.name].incart)
      cartItems[product.name].incart += 1;
    }
    else {
      product.incart = 1;
      cartItems = {
       [product.name] : product
     }
    }
    
    localStorage.setItem('productsInCart',JSON.stringify(cartItems))
  }
  function totalCost(product){
    // console.log('The Product Price Is',product.price);
    let cartCost = localStorage.getItem('totalCost')
    // product.price = parseInt(product.price)
    if(cartCost != null){
      cartCost = parseInt(cartCost);
      product.price =parseInt(product.price)

      localStorage.setItem('totalCost', cartCost + product.price)
    }
    else {
      localStorage.setItem('totalCost', product.price);
    }
    
  }

//  console.log(document.getElementById('cart-button'));
//  window.onload.href ="../html/checkoutForm.html"
function changePage(){
  if(document.getElementById('cart-number').textContent == 0){
alertify.alert("You need to pick your products first!!")  }
else{
  window.location.href ="../html/checkoutForm.html"
} }


function myFunction(){
  
  
  let input = document.getElementById('mySearch');
  
  let productContainer = document.getElementById('product-container');
  productContainer.innerHTML = ""
  let filter = input.value.toUpperCase();
  for(let i=0;i<listPhones.length;i++){
    let phone = listPhones[i]
    if(phone.name.toUpperCase().indexOf(filter)> -1){
      function formatNumber (num) {
        return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
    }
    
      let HTML =`
      <div  class="product-show">
      <img src="${phone.img}" alt="">
          <div id='name'>${phone.name}</div>
          <div>${formatNumber(phone.price)} VND</div>
          <button class="btnAddCart" onclick="clickCart('${phone.name}')">Add To Cart</button>
          </div>

      
      `
      productContainer.innerHTML+= HTML


    }
    else if(filter ==''){
      displayListPhones();
    }
  }
}

//style lai cac the phone de no dung canh nhau
